{% extends "base.html" %}
{% block content %}
<h2 class="fs-3 mt-4 mb-3">Step 1. Read the following question</h2>
<p>Given a sequence of $n$ integers, $p(1), p(2), ..., p(n)$ where each element is distinct and satisfies $1 \le p(x) \le n$. For each $x$ where $1 \le x \le n$, find any integer $y$ such that $p(p(y)) \equiv x$ and return all $y$ values in an array.</p>
<p>For example, assume the sequence $p = [5,2,1,3,4]$. Each value of $x$ between $1$ and $5$, the length of the sequence, is analyzed as follows:</p>
<ol>
    <li>$x = 1$, $p[3] = 1$ and $p[4] = 3$, so $p[p[4]] = 1$</li>
    <li>$x = 2$, $p[2] = 2$ and $p[2] = 2$, so $p[p[2]] = 2$</li>
    <li>$x = 3$, $p[4] = 3$ and $p[5] = 4$, so $p[p[5]] = 3$</li>
    <li>$x = 4$, $p[5] = 4$ and $p[1] = 5$, so $p[p[1]] = 4$</li>
    <li>$x = 5$, $p[1] = 5$ and $p[3] = 1$, so $p[p[3]] = 5$</li>
</ol>
<p>Therefore, the values of $y$ should be $[4,2,5,1,3]$.</p>
<p><b>Complete the given method, permutationEquation, in Java</b> below such that it would take the array p as input and return the array y.</p>

<h2 class="fs-3 mt-4 mb-3">Step 2. Download the following files and complete the task</h2>
<p><a href="{{ url_for('static', filename='Solution.java') }}">[Download Solution.java]</a><br><a href="{{ url_for('static', filename='Test.java') }}">[Download Test.java]</a></p>
<p>Complete Solution.java and upload it below. Do not change the name of the class and the default function declaration. You could add your own helper functions though.</p>
<p>It is suggested to test that you code works before submitting, just compile and run Test.java to do so.</p>

<h2 class="fs-3 mt-4 mb-3">Step 3. Upload your solution</h2>
<input type="file" name="upload" id="upload" class="mb-3">

<div id="editor" class="mb-3"></div>

<h2 class="fs-3 mt-4 mb-3">Step 4. <a href="#" id="submitBtn">[Submit]</a></h2>

<form id="codeForm" action="/result" method="post">
    <input type="hidden" name="code" id="code">
</form>
{% endblock %}
{% block scripts %}
<script>
    MathJax = {
        tex: {
            inlineMath: [
                ['$', '$'],
                ['\\(', '\\)']
            ]
        },
        svg: {
            fontCache: 'global'
        }
    };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/codemirror.min.js" integrity="sha512-9fASXXoC6x4BKdqe6IcEYZnt4KPMiQx5YJIsiWevf2QpSXfPcXMj4MTzIbwQuKJRysBlRh1LGHIaQm/415WyEA==" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/codemirror.min.css" integrity="sha512-MWdvo/Qqcf4pY1ecQUB1uBn0qLp19U/qJ1Rpp2BDZeuBA7YsFEwkvqR/+aG4BroPiAYDunKJ6X8R/Pmdt3p7oA==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/mode/clike/clike.min.js" integrity="sha512-ipYOW38nHWkd5HgeKxdGd+7zft6CTWXXBtXxfmrJm+xOgcYTnV2RnHtfrtXDwjlxRRLL+e163/V8A/H9g8G+JQ==" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/theme/seti.min.css" integrity="sha512-A7KLVdYbXryV98af9mTrVoUPuUuq94hkMjPgzHnrfi6QZbq9ylrgbRKp31/DQ8qareLzA3e56/VmIrrQlaDAqw==" crossorigin="anonymous" />
<script>
    var codeMirror = CodeMirror(document.getElementById("editor"), {
        lineNumbers: true,
        theme: "seti",
        readOnly: true
    });
    codeMirror.setSize(null, 400);

    var fileSelector = document.getElementById("upload");
    var reader = new FileReader();
    var code;
    reader.addEventListener('load', (event) => {
        code = event.target.result;
        codeMirror.getDoc().setValue(code);
    });
    fileSelector.addEventListener('change', (event) => {
        reader.readAsText(event.target.files[0]);
    });

    $('#submitBtn').click(function() {
        if (code == undefined) {
            alert("Select a file before submit.");
        } else {
            $('#code').val(code);
            $('#codeForm').submit();
        }
    });
</script>
{% endblock %}
