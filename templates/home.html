<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>Coding Expert Detector</title>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="#">Coding Expert Detector</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                    <a class="nav-link" href="#">About</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="bg-light p-5 rounded-lg my-3">
            <h1 class="display-4">Coding Expert Detector</h1>
            <p class="fs-6"><b>TL;DR: This is a tool to see if you code like an expert do. Solve the question below and you'll get the results.</b> This website uses a model trained using machine learning to determine if your code is more similar to
                experts' or novices'.</p>
        </div>

        <p>Given a sequence of $n$ integers, $p(1), p(2), ..., p(n)$ where each element is distinct and satisfies $1 \le p(x) \le n$. For each $x$ where $1 \le x \le n$, find any integer $y$ such that $p(p(y)) \equiv x$ and print the value of $y$ on a new line.</p>
        <p>For example, assume the sequence $p = [5,2,1,3,4]$. Each value of $x$ between $1$ and $5$, the length of the sequence, is analyzed as follows:</p>
        <ol>
            <li>$x = 1$, $p[3] = 1$ and $p[4] = 3$, so $p[p[4]] = 1$</li>
            <li>$x = 2$, $p[2] = 2$ and $p[2] = 2$, so $p[p[2]] = 2$</li>
            <li>$x = 3$, $p[4] = 3$ and $p[5] = 4$, so $p[p[5]] = 3$</li>
            <li>$x = 4$, $p[5] = 4$ and $p[1] = 5$, so $p[p[1]] = 4$</li>
            <li>$x = 5$, $p[1] = 5$ and $p[3] = 1$, so $p[p[3]] = 5$</li>
        </ol>
        <p>Therefore, the values of $y$ should be $[4,2,5,1,3]$.</p>
        <p><b>Complete the given method, permutationEquation, in Java</b> below such that it would take the array p as input and return the array y.</p>

        <input type="file" name="upload" id="upload" class="mb-3">

        <div id="editor" class="mb-3"></div>

        <button type="button" id="testCodeBtn" class="btn btn-secondary">Run Tests</button>
        <button type="button" id="submitBtn" class="btn btn-primary">Submit</button>
    </div>

    <style>
        .CodeMirror {
            font-size: 13px;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <script>
        MathJax = {
            tex: {
                inlineMath: [
                    ['$', '$'],
                    ['\\(', '\\)']
                ]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/codemirror.min.js" integrity="sha512-9fASXXoC6x4BKdqe6IcEYZnt4KPMiQx5YJIsiWevf2QpSXfPcXMj4MTzIbwQuKJRysBlRh1LGHIaQm/415WyEA==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/codemirror.min.css" integrity="sha512-MWdvo/Qqcf4pY1ecQUB1uBn0qLp19U/qJ1Rpp2BDZeuBA7YsFEwkvqR/+aG4BroPiAYDunKJ6X8R/Pmdt3p7oA==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/mode/clike/clike.min.js" integrity="sha512-ipYOW38nHWkd5HgeKxdGd+7zft6CTWXXBtXxfmrJm+xOgcYTnV2RnHtfrtXDwjlxRRLL+e163/V8A/H9g8G+JQ==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/theme/seti.min.css" integrity="sha512-A7KLVdYbXryV98af9mTrVoUPuUuq94hkMjPgzHnrfi6QZbq9ylrgbRKp31/DQ8qareLzA3e56/VmIrrQlaDAqw==" crossorigin="anonymous" />
    <script>
        var codeMirror = CodeMirror(document.getElementById("editor"), {
            value: "static int[] permutationEquation(int[] p) {\n    // Write your code here, do not modify the method declaration\n}\n",
            lineNumbers: true,
            theme: "seti",
        });
        codeMirror.setSize(null, 400);

        var fileSelector = document.getElementById("upload");
        var reader = new FileReader();
        reader.addEventListener('load', (event) => {
            codeMirror.getDoc().setValue(event.target.result);
        });
        fileSelector.addEventListener('change', (event) => {
            reader.readAsText(event.target.files[0]);
        });

        $('#testCodeBtn').click(function() {
            console.log(codeMirror.getDoc().getValue());
            // send to page on server to trigger api call
            // server modify to complete code, and somehow suppress user print
            // server do basic checks (method name, etc)
            // server issue api call to jdoodle, maybe rate limit it as well
            // server return result
        });
    </script>
</body>

</html>
